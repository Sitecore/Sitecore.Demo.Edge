{
  "clientKey": "Redacted",
  "href": "https://api-us.boxever.com/v3/flowDefinitions/64156033-824f-4842-84f6-4575b21b52df",
  "ref": "64156033-824f-4842-84f6-4575b21b52df",
  "name": "Slide out guest data panel",
  "modifiedByRef": "51e88c16-25b8-4cf2-a0df-c12574ee3aea",
  "modifiedAt": "2022-10-07T14:03:51.632Z",
  "revision": 189,
  "archived": false,
  "friendlyId": "slide_out_demo_bar",
  "type": "INTERACTIVE_WEB_FLOW",
  "subtype": "EXPERIENCE",
  "channels": [
    "WEB"
  ],
  "triggers": [],
  "referenceLinks": [],
  "dashboardLinks": [],
  "target": {
    "script": "// Use client-side JavaScript to more specifically target users\n// NOTE: When your targeting conditions are met you must call targetingPassed() \n\n(function () {\n    // Add a delay to prevent race conditions (in ms)\n    const timeDelaySeconds = 500;\n    \n    window.setTimeout(targetingPassed, timeDelaySeconds);\n    var pushState = history.pushState;\n    history.pushState = function() {\n        pushState.apply(history, arguments);\n        window.setTimeout(targetingPassed, timeDelaySeconds);\n    };\n    \n    window.refreshGuestSidebarWebExperience = function() {\n        window.setTimeout(targetingPassed, timeDelaySeconds);\n    };\n})();",
    "targetPages": [
      {
        "operator": "Matches Regex",
        "value": "[\\s\\S]"
      }
    ]
  },
  "tags": [],
  "businessProcess": "interactive_v1",
  "traffic": {
    "type": "simpleTraffic",
    "weightingAlgorithm": "USER_DEFINED",
    "modifiedAt": "2022-10-07T14:03:13.056Z",
    "allocation": 100,
    "splits": [
      {
        "ref": "780ac6ab-ed19-4308-a425-23e698885c0d",
        "split": 100
      }
    ],
    "coupled": true
  },
  "variants": [
    {
      "ref": "780ac6ab-ed19-4308-a425-23e698885c0d",
      "name": "Variant 1",
      "isControl": true,
      "previewUrl": "https://www.edge.localhost/",
      "assets": {
        "css": "/*\r\n[[Icon Colour | colour | #ffffff  | {group: Open Button, order: 2 }]]\r\n[[Background Colour | colour | #006EF9 | {group: Open Button, order: 3 }]]\r\n[[Top Margin | number | 160 | {group: Open Button, order: 4 }]]\r\n*/\r\n\r\n#bx-{{ref}} a,\r\n#bx-{{ref}} p,\r\n#bx-{{ref}} span,\r\n#bx-{{ref}} h3 { font-weight: 300; line-height: 1.2; }\r\n\r\n#bx-{{ref}} #bx-databar { position: fixed; top: 0; right: -450px; height: 100%; width: 450px; z-index: 99998; transition: right 0.6s ease-in-out; box-shadow: 0 0.2rem 0.4rem 0.2rem rgba(0, 0, 0, 0.1); }\r\n\r\n#bx-{{ref}} #bx-databar.open { right: 0; z-index: 99999; max-width: 100vw; }\r\n\r\n#bx-{{ref}} #bx-databar .bx-databar__openToggle { position: absolute; left: 39px; top: [[Top Margin]]px; width: 50px; height: 50px; transform: translateX(-100%); background-color: [[ Background Colour ]]; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2); text-align: center; font-size: 26px; color: [[ Icon Colour ]]; cursor: pointer; padding-top: 5px; }\r\n#bx-{{ref}} #bx-databar .bx-databar__openToggle:hover { left: 0; transition: 0.3s; }\r\n#bx-{{ref}} #bx-databar.open .bx-databar__openToggle { display: none; }\r\n\r\n#bx-{{ref}} #bx-databar .bx-databar__body { overflow-y: auto; height: 100%; background-color: #f7f7f7; }\r\n#bx-{{ref}} #bx-databar .databar__body__section { padding: 15px; background-color: #f7f7f7; }\r\n\r\n/* scollbar */\r\n#bx-{{ref}} #bx-databar .bx-databar__body::-webkit-scrollbar { width: 12px; } /* width of the entire scrollbar */\r\n#bx-{{ref}} #bx-databar .bx-databar__body::-webkit-scrollbar-track {  background-color: #f7f7f7; } /* color of the tracking area */\r\n#bx-{{ref}} #bx-databar .bx-databar__body::-webkit-scrollbar-thumb { background-color: #666666; /* color of the scroll thumb */ border-radius: 20px; /* roundness of the scroll thumb */ border: 3px solid #f7f7f7; /* creates padding around scroll thumb */ }\r\n\r\n/* header */\r\n#bx-{{ref}} .databar-heading { position: sticky; top: 0; }\r\n#bx-{{ref}} .databar-heading h3 { font-weight: bold; font-size: 22px; }\r\n\r\n#bx-{{ref}} .guestIdentifer { font-size: 18px; line-height: 24px; }\r\n#bx-{{ref}} .guestProvider { font-size: 14px; }\r\n#bx-{{ref}} .guestRef { font-size: 14px; color:gray; line-height: 24px; }\r\n#bx-{{ref}} .guestType { font-size: 16px; line-height: 24px; }\r\n\r\n/* close button */\r\n#bx-{{ref}} .bx-databar__closeButton { position: absolute; top: 10px; right: 10px; width: 22px; height: 30px; cursor: pointer; font-size: 34px; line-height: 0; }\r\n\r\n/* accordion */\r\n#bx-{{ref}} .databar-accordion + .databar-accordion { margin-top: 20px; }\r\n\r\n#bx-{{ref}} .databar-accordion-button { width: 100%; background-color: white; color: #232323; border: 2px solid #666666; outline: none; text-align: left; padding: 5px 10px; font-size: 18px; cursor: pointer; transition: background-color 0.2s linear; text-transform: lowercase; }\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button { font-weight: bold; }\r\n#bx-{{ref}} .databar-accordion-button:after { text-rendering: auto; -webkit-font-smoothing: antialiased; font: var(--fa-font-solid); font-size: 25px; content: \"\\f107\"; float: right; }\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button:after { content: \"\\f106\"; }\r\n\r\n#bx-{{ref}} .databar-accordion-content { background-color: white; max-height: 0; overflow: hidden; transition: max-height 0.2s ease-in-out; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2); }\r\n\r\n#bx-{{ref}} .databar-accordion-button.openSession { color:#006EF9; }\r\n#bx-{{ref}} .databar-accordion-button.openSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.openSession { background-color:  #006EF9; border-color:  #006EF9; color: #fff; }\r\n#bx-{{ref}} .databar-accordion-button.closedSession { color:#666666; }\r\n#bx-{{ref}} .databar-accordion-button.closedSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.closedSession { background-color:  #666666; border-color:  #666666; color: #fff; }\r\n#bx-{{ref}} .databar-accordion-button.cartSession { color: #FF1886; }\r\n#bx-{{ref}} .databar-accordion-button.cartSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.cartSession { background-color:  #FF1886; border-color:  #FF1886; color: #fff; }\r\n#bx-{{ref}} .databar-accordion-button.emailSession { color: #ff8d00; }\r\n#bx-{{ref}} .databar-accordion-button.emailSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.emailSession { background-color:  #ff8d00; border-color:  #ff8d00; color: #fff; }\r\n#bx-{{ref}} .databar-accordion-button.convertSession { color: #005E6E; }\r\n#bx-{{ref}} .databar-accordion-button.convertSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.convertSession { background-color:  #005E6E; border-color:  #005E6E; color: #fff; }\r\n\r\n/* events */\r\n#bx-{{ref}} .databar-event { margin: 0 10px; padding: 10px 0; }\r\n#bx-{{ref}} .databar-event + .databar-event { border-top: 1px solid #cccccc; }\r\n#bx-{{ref}} .databar-event p + p { margin-top: 5px; }\r\n\r\n#bx-{{ref}} .databar-eventTitle { font-size: 16px; font-weight: 500; }\r\n#bx-{{ref}} .viewevent  { color: #006EF9; }\r\n#bx-{{ref}} .identityevent { color:  #d7ad00; }\r\n#bx-{{ref}} .addevent { color:  #ff8d00; }\r\n#bx-{{ref}} .checkoutevent { color: #FF1886; }\r\n#bx-{{ref}} .customevent { color: #666666; }\r\n\r\n#bx-{{ref}} .databar-eventDate { font-size: 12px; color: gray; }\r\n#bx-{{ref}} .databar-eventInfo { font-size: 14px; font-weight: 400;}\r\n",
        "html": "<!-- define the structure and content of your Experience in HTML e.g.-->\r\n<div id=\"bx-databar\">\r\n    <div class=\"bx-databar__openToggle\" title=\"Guest Data\">\r\n        <i class=\"[[FontAwesome Icon | string | fa-solid fa-circle-info  | {group: Open Button, groupOrder: 1, order: 1 }]]\"></i>\r\n    </div>\r\n    <div class=\"bx-databar__body\">\r\n        <div class=\"databar__body__section databar-heading\">\r\n            <h3>Guest Data</h3>\r\n            {{#if guest}}\r\n                {{#if guest.identifiers}}\r\n                    {{#each guest.identifiers}}\r\n                        <p class=\"guestIdentifer\">{{id}} <span class=\"guestProvider\">({{provider}})</span></p>\r\n                    {{/each}}\r\n                    <p class=\"guestRef\">{{guest.ref}}</p>\r\n                    <p class=\"guestType\">{{guest.guestType}}</p>\r\n                {{else}}\r\n                    <p class=\"guestIdentifer\">{{guest.ref}}</p>\r\n                    <p class=\"guestType\">{{guest.guestType}}</p>\r\n                {{/if}}\r\n            {{else}}\r\n                <p class=\"guestIdentifer\">No guest</p>\r\n            {{/if}}\r\n            <div class=\"bx-databar__closeButton\">\r\n                <i class=\"fa-solid fa-xmark\"></i>\r\n            </div>\r\n        </div>\r\n\r\n        {{#if guest}}\r\n            <div class=\"databar__body__section\">\r\n                {{#if guest.sessions}}\r\n                    {{#each guest.sessions}}\r\n                        <div class=\"databar-accordion\">\r\n                            {{#equals cartType 'ABANDONED'}}\r\n                                <button class=\"databar-accordion-button cartSession\">{{sessionType}} {{cartType}} Session</button>\r\n                            {{else equals cartType 'CONVERTED'}}\r\n                                <button class=\"databar-accordion-button convertSession\">{{sessionType}} {{cartType}} Session</button>\r\n                            {{else equals sessionType 'EMAIL'}}\r\n                                <button class=\"databar-accordion-button emailSession\">{{sessionType}} Session</button>\r\n                            {{else equals status 'OPEN'}}\r\n                                <button class=\"databar-accordion-button openSession\">{{sessionType}} {{status}} Session</button>\r\n                            {{else}}\r\n                                <button class=\"databar-accordion-button closedSession\">{{sessionType}} {{status}} Session</button>\r\n                            {{/equals}}\r\n                            <div class=\"databar-accordion-content\">\r\n                                {{#if events}}\r\n                                    {{#each events}}\r\n                                        {{#equals type 'TRACKING'}}\r\n                                            <!-- do nothing -->\r\n                                        {{else equals type 'VIEW'}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"databar-eventTitle viewevent\">Viewed page</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">{{arbitraryData.page}}</p>\r\n                                            </div>\r\n                                        {{else equals type 'IDENTITY'}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"identityevent\">Guest identified</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">({{arbitraryData.email}})</p>\r\n                                            </div>\r\n                                        {{else equals type 'ADD'}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"addevent\">Added product to cart</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">Type: {{arbitraryData.product.type}}</p>\r\n                                                <p class=\"databar-eventInfo\">Name: {{arbitraryData.product.name}}</p>\r\n                                            </div>\r\n                                        {{else equals type 'CHECKOUT'}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"checkoutevent\">Completed purchase</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">Order: {{arbitraryData.reference_id}}</p>\r\n                                            </div>\r\n                                        {{else}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"customevent\">Sent custom event</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">{{type}}</p>\r\n                                            </div>\r\n                                        {{/equals}}\r\n                                    {{/each}}\r\n                                {{/if}}\r\n                            </div>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n            </div>\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n",
        "js": "// Adds a unique variant identifier to CSS when deployed to ensure CSS does not impact styling of other elements.\r\nvar compiledCSS = Boxever.templating.compile(variant.assets.css)(variant);\r\nvar styleTag = document.getElementById('style-' + variant.ref);\r\nif (styleTag) {\r\n    styleTag.innerHTML = compiledCSS;\r\n}\r\n// End Adds a unique variant identifier to CSS when deployed to ensure CSS does not impact styling of other elements.\r\n\r\n// Add FontAwesome to the page\r\nvar fontAwesomeScriptElement = document.createElement('script');\r\nfontAwesomeScriptElement.src = 'https://kit.fontawesome.com/b19590b5e3.js';\r\ndocument.body.appendChild(fontAwesomeScriptElement);\r\n\r\n// make space in the body for the experience\r\ninsertHTMLAfter('body');\r\n\r\n/* code to operate the databar */ \r\nvar bxContent = document.getElementById('bx-databar');\r\nvar bxDatabarOpenToggle = bxContent.querySelector('.bx-databar__openToggle');\r\nbxDatabarOpenToggle.onclick = function () {\r\n  if (!bxContent.classList.contains('open')) {\r\n    bxContent.classList.add('open');\r\n  }\r\n};\r\nvar bxDatabarCloseButton = bxContent.querySelector('.bx-databar__closeButton');\r\nbxDatabarCloseButton.onclick = function () {\r\n  if (bxContent.classList.contains('open')) {\r\n    bxContent.classList.remove('open');\r\n  }\r\n};\r\n\r\n/* code to make accordion work */\r\nconst accordionBtns = document.querySelectorAll(\".databar-accordion-button\");\r\n\r\naccordionBtns.forEach((accordion) => {\r\n  accordion.onclick = function () {\r\n    this.parentElement.classList.toggle(\"is-open\");\r\n\r\n    let content = this.nextElementSibling;\r\n\r\n    if (content.style.maxHeight) {\r\n      //this is if the accordion is open\r\n      content.style.maxHeight = null;\r\n    } else {\r\n      //if the accordion is currently closed\r\n      content.style.maxHeight = content.scrollHeight + \"px\";\r\n    }\r\n  };\r\n});\r\n"
      },
      "templateVariables": {
        "FontAwesome Icon": "fa-solid fa-circle-info",
        "Icon Colour": "#ffffff",
        "Background Colour": "#006EF9",
        "Top Margin": "160"
      },
      "tasks": [
        {
          "implementation": "templateRenderTask",
          "input": {
            "inputType": "templateRenderTaskInput",
            "type": "application/json",
            "template": "<#-- Construct the API response using Freemarker -->\n<#-- For your Experience to run your API tab must have, at a minimum, open and closing brackets -->\n<#-- Construct the API response using Freemarker -->\n{\n  \"guest\": ${toJSON(guest)} \n}"
          }
        }
      ],
      "description": "Add your own HTML/CSS/JS and Freemarker",
      "render": false
    }
  ],
  "transpiledVariants": [
    {
      "ref": "780ac6ab-ed19-4308-a425-23e698885c0d",
      "name": "Variant 1",
      "isControl": true,
      "previewUrl": "https://www.edge.localhost/",
      "assets": {
        "css": "/*\r\n#ffffff\r\n#006EF9\r\n160\r\n*/\r\n\r\n#bx-{{ref}} a,\r\n#bx-{{ref}} p,\r\n#bx-{{ref}} span,\r\n#bx-{{ref}} h3 { font-weight: 300; line-height: 1.2; }\r\n\r\n#bx-{{ref}} #bx-databar { position: fixed; top: 0; right: -450px; height: 100%; width: 450px; z-index: 99998; transition: right 0.6s ease-in-out; box-shadow: 0 0.2rem 0.4rem 0.2rem rgba(0, 0, 0, 0.1); }\r\n\r\n#bx-{{ref}} #bx-databar.open { right: 0; z-index: 99999; max-width: 100vw; }\r\n\r\n#bx-{{ref}} #bx-databar .bx-databar__openToggle { position: absolute; left: 39px; top: 160px; width: 50px; height: 50px; transform: translateX(-100%); background-color: #006EF9; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2); text-align: center; font-size: 26px; color: #ffffff; cursor: pointer; padding-top: 5px; }\r\n#bx-{{ref}} #bx-databar .bx-databar__openToggle:hover { left: 0; transition: 0.3s; }\r\n#bx-{{ref}} #bx-databar.open .bx-databar__openToggle { display: none; }\r\n\r\n#bx-{{ref}} #bx-databar .bx-databar__body { overflow-y: auto; height: 100%; background-color: #f7f7f7; }\r\n#bx-{{ref}} #bx-databar .databar__body__section { padding: 15px; background-color: #f7f7f7; }\r\n\r\n/* scollbar */\r\n#bx-{{ref}} #bx-databar .bx-databar__body::-webkit-scrollbar { width: 12px; } /* width of the entire scrollbar */\r\n#bx-{{ref}} #bx-databar .bx-databar__body::-webkit-scrollbar-track {  background-color: #f7f7f7; } /* color of the tracking area */\r\n#bx-{{ref}} #bx-databar .bx-databar__body::-webkit-scrollbar-thumb { background-color: #666666; /* color of the scroll thumb */ border-radius: 20px; /* roundness of the scroll thumb */ border: 3px solid #f7f7f7; /* creates padding around scroll thumb */ }\r\n\r\n/* header */\r\n#bx-{{ref}} .databar-heading { position: sticky; top: 0; }\r\n#bx-{{ref}} .databar-heading h3 { font-weight: bold; font-size: 22px; }\r\n\r\n#bx-{{ref}} .guestIdentifer { font-size: 18px; line-height: 24px; }\r\n#bx-{{ref}} .guestProvider { font-size: 14px; }\r\n#bx-{{ref}} .guestRef { font-size: 14px; color:gray; line-height: 24px; }\r\n#bx-{{ref}} .guestType { font-size: 16px; line-height: 24px; }\r\n\r\n/* close button */\r\n#bx-{{ref}} .bx-databar__closeButton { position: absolute; top: 10px; right: 10px; width: 22px; height: 30px; cursor: pointer; font-size: 34px; line-height: 0; }\r\n\r\n/* accordion */\r\n#bx-{{ref}} .databar-accordion + .databar-accordion { margin-top: 20px; }\r\n\r\n#bx-{{ref}} .databar-accordion-button { width: 100%; background-color: white; color: #232323; border: 2px solid #666666; outline: none; text-align: left; padding: 5px 10px; font-size: 18px; cursor: pointer; transition: background-color 0.2s linear; text-transform: lowercase; }\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button { font-weight: bold; }\r\n#bx-{{ref}} .databar-accordion-button:after { text-rendering: auto; -webkit-font-smoothing: antialiased; font: var(--fa-font-solid); font-size: 25px; content: \"\\f107\"; float: right; }\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button:after { content: \"\\f106\"; }\r\n\r\n#bx-{{ref}} .databar-accordion-content { background-color: white; max-height: 0; overflow: hidden; transition: max-height 0.2s ease-in-out; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2); }\r\n\r\n#bx-{{ref}} .databar-accordion-button.openSession { color:#006EF9; }\r\n#bx-{{ref}} .databar-accordion-button.openSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.openSession { background-color:  #006EF9; border-color:  #006EF9; color: #fff; }\r\n#bx-{{ref}} .databar-accordion-button.closedSession { color:#666666; }\r\n#bx-{{ref}} .databar-accordion-button.closedSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.closedSession { background-color:  #666666; border-color:  #666666; color: #fff; }\r\n#bx-{{ref}} .databar-accordion-button.cartSession { color: #FF1886; }\r\n#bx-{{ref}} .databar-accordion-button.cartSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.cartSession { background-color:  #FF1886; border-color:  #FF1886; color: #fff; }\r\n#bx-{{ref}} .databar-accordion-button.emailSession { color: #ff8d00; }\r\n#bx-{{ref}} .databar-accordion-button.emailSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.emailSession { background-color:  #ff8d00; border-color:  #ff8d00; color: #fff; }\r\n#bx-{{ref}} .databar-accordion-button.convertSession { color: #005E6E; }\r\n#bx-{{ref}} .databar-accordion-button.convertSession:hover,\r\n#bx-{{ref}} .databar-accordion.is-open .databar-accordion-button.convertSession { background-color:  #005E6E; border-color:  #005E6E; color: #fff; }\r\n\r\n/* events */\r\n#bx-{{ref}} .databar-event { margin: 0 10px; padding: 10px 0; }\r\n#bx-{{ref}} .databar-event + .databar-event { border-top: 1px solid #cccccc; }\r\n#bx-{{ref}} .databar-event p + p { margin-top: 5px; }\r\n\r\n#bx-{{ref}} .databar-eventTitle { font-size: 16px; font-weight: 500; }\r\n#bx-{{ref}} .viewevent  { color: #006EF9; }\r\n#bx-{{ref}} .identityevent { color:  #d7ad00; }\r\n#bx-{{ref}} .addevent { color:  #ff8d00; }\r\n#bx-{{ref}} .checkoutevent { color: #FF1886; }\r\n#bx-{{ref}} .customevent { color: #666666; }\r\n\r\n#bx-{{ref}} .databar-eventDate { font-size: 12px; color: gray; }\r\n#bx-{{ref}} .databar-eventInfo { font-size: 14px; font-weight: 400;}\r\n",
        "html": "<!-- define the structure and content of your Experience in HTML e.g.-->\r\n<div id=\"bx-databar\">\r\n    <div class=\"bx-databar__openToggle\" title=\"Guest Data\">\r\n        <i class=\"fa-solid fa-circle-info\"></i>\r\n    </div>\r\n    <div class=\"bx-databar__body\">\r\n        <div class=\"databar__body__section databar-heading\">\r\n            <h3>Guest Data</h3>\r\n            {{#if guest}}\r\n                {{#if guest.identifiers}}\r\n                    {{#each guest.identifiers}}\r\n                        <p class=\"guestIdentifer\">{{id}} <span class=\"guestProvider\">({{provider}})</span></p>\r\n                    {{/each}}\r\n                    <p class=\"guestRef\">{{guest.ref}}</p>\r\n                    <p class=\"guestType\">{{guest.guestType}}</p>\r\n                {{else}}\r\n                    <p class=\"guestIdentifer\">{{guest.ref}}</p>\r\n                    <p class=\"guestType\">{{guest.guestType}}</p>\r\n                {{/if}}\r\n            {{else}}\r\n                <p class=\"guestIdentifer\">No guest</p>\r\n            {{/if}}\r\n            <div class=\"bx-databar__closeButton\">\r\n                <i class=\"fa-solid fa-xmark\"></i>\r\n            </div>\r\n        </div>\r\n\r\n        {{#if guest}}\r\n            <div class=\"databar__body__section\">\r\n                {{#if guest.sessions}}\r\n                    {{#each guest.sessions}}\r\n                        <div class=\"databar-accordion\">\r\n                            {{#equals cartType 'ABANDONED'}}\r\n                                <button class=\"databar-accordion-button cartSession\">{{sessionType}} {{cartType}} Session</button>\r\n                            {{else equals cartType 'CONVERTED'}}\r\n                                <button class=\"databar-accordion-button convertSession\">{{sessionType}} {{cartType}} Session</button>\r\n                            {{else equals sessionType 'EMAIL'}}\r\n                                <button class=\"databar-accordion-button emailSession\">{{sessionType}} Session</button>\r\n                            {{else equals status 'OPEN'}}\r\n                                <button class=\"databar-accordion-button openSession\">{{sessionType}} {{status}} Session</button>\r\n                            {{else}}\r\n                                <button class=\"databar-accordion-button closedSession\">{{sessionType}} {{status}} Session</button>\r\n                            {{/equals}}\r\n                            <div class=\"databar-accordion-content\">\r\n                                {{#if events}}\r\n                                    {{#each events}}\r\n                                        {{#equals type 'TRACKING'}}\r\n                                            <!-- do nothing -->\r\n                                        {{else equals type 'VIEW'}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"databar-eventTitle viewevent\">Viewed page</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">{{arbitraryData.page}}</p>\r\n                                            </div>\r\n                                        {{else equals type 'IDENTITY'}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"identityevent\">Guest identified</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">({{arbitraryData.email}})</p>\r\n                                            </div>\r\n                                        {{else equals type 'ADD'}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"addevent\">Added product to cart</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">Type: {{arbitraryData.product.type}}</p>\r\n                                                <p class=\"databar-eventInfo\">Name: {{arbitraryData.product.name}}</p>\r\n                                            </div>\r\n                                        {{else equals type 'CHECKOUT'}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"checkoutevent\">Completed purchase</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">Order: {{arbitraryData.reference_id}}</p>\r\n                                            </div>\r\n                                        {{else}}\r\n                                            <div class=\"databar-event\">\r\n                                                <p class=\"customevent\">Sent custom event</p>\r\n                                                <p class=\"databar-eventDate\">{{createdAt}}</p>\r\n                                                <p class=\"databar-eventInfo\">{{type}}</p>\r\n                                            </div>\r\n                                        {{/equals}}\r\n                                    {{/each}}\r\n                                {{/if}}\r\n                            </div>\r\n                        </div>\r\n                    {{/each}}\r\n                {{/if}}\r\n            </div>\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n",
        "js": "// Adds a unique variant identifier to CSS when deployed to ensure CSS does not impact styling of other elements.\r\nvar compiledCSS = Boxever.templating.compile(variant.assets.css)(variant);\r\nvar styleTag = document.getElementById('style-' + variant.ref);\r\nif (styleTag) {\r\n    styleTag.innerHTML = compiledCSS;\r\n}\r\n// End Adds a unique variant identifier to CSS when deployed to ensure CSS does not impact styling of other elements.\r\n\r\n// Add FontAwesome to the page\r\nvar fontAwesomeScriptElement = document.createElement('script');\r\nfontAwesomeScriptElement.src = 'https://kit.fontawesome.com/b19590b5e3.js';\r\ndocument.body.appendChild(fontAwesomeScriptElement);\r\n\r\n// make space in the body for the experience\r\ninsertHTMLAfter('body');\r\n\r\n/* code to operate the databar */ \r\nvar bxContent = document.getElementById('bx-databar');\r\nvar bxDatabarOpenToggle = bxContent.querySelector('.bx-databar__openToggle');\r\nbxDatabarOpenToggle.onclick = function () {\r\n  if (!bxContent.classList.contains('open')) {\r\n    bxContent.classList.add('open');\r\n  }\r\n};\r\nvar bxDatabarCloseButton = bxContent.querySelector('.bx-databar__closeButton');\r\nbxDatabarCloseButton.onclick = function () {\r\n  if (bxContent.classList.contains('open')) {\r\n    bxContent.classList.remove('open');\r\n  }\r\n};\r\n\r\n/* code to make accordion work */\r\nconst accordionBtns = document.querySelectorAll(\".databar-accordion-button\");\r\n\r\naccordionBtns.forEach((accordion) => {\r\n  accordion.onclick = function () {\r\n    this.parentElement.classList.toggle(\"is-open\");\r\n\r\n    let content = this.nextElementSibling;\r\n\r\n    if (content.style.maxHeight) {\r\n      //this is if the accordion is open\r\n      content.style.maxHeight = null;\r\n    } else {\r\n      //if the accordion is currently closed\r\n      content.style.maxHeight = content.scrollHeight + \"px\";\r\n    }\r\n  };\r\n});\r\n"
      },
      "templateVariables": {
        "FontAwesome Icon": "fa-solid fa-circle-info",
        "Icon Colour": "#ffffff",
        "Background Colour": "#006EF9",
        "Top Margin": "160"
      },
      "tasks": [
        {
          "implementation": "templateRenderTask",
          "input": {
            "inputType": "templateRenderTaskInput",
            "type": "application/json",
            "template": "<#-- Construct the API response using Freemarker -->\n<#-- For your Experience to run your API tab must have, at a minimum, open and closing brackets -->\n<#-- Construct the API response using Freemarker -->\n{\n  \"guest\": ${toJSON(guest)} \n}"
          }
        }
      ],
      "description": "Add your own HTML/CSS/JS and Freemarker"
    }
  ],
  "audienceTemplateVariables": {},
  "status": "PRODUCTION",
  "schedule": {
    "type": "simpleSchedule",
    "startDate": "2022-10-07T14:03:12.756Z"
  },
  "revisions": {
    "href": "https://api-us.boxever.com/v3/flowDefinitions/64156033-824f-4842-84f6-4575b21b52df/revisions"
  },
  "sampleSizeConfig": {
    "baseValue": 0.02,
    "minimumDetectableDifference": 0.2,
    "confidenceLevel": 0.95
  }
}